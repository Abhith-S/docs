"use strict";(function(){const i="/en.search-data.min.aad24deffa0f6dc9c16424743bda18e10a216511584d81abb692d0caeea35c37.json",a=Object.assign({cache:!0},{id:"id",tag:"first",index:[{field:"title",tokenize:"forward",optimize:!0,resolution:9},{field:"content",tokenize:"strict",optimize:!0,resolution:5,minlength:3,context:{depth:1,resolution:3}}],store:["title","href","section","first"]}),e=document.querySelector("#book-search-input"),t=document.querySelector("#book-search-results");if(!e)return;e.addEventListener("focus",n),e.addEventListener("keyup",s),document.addEventListener("keypress",r);function r(t){if(t.target.value!==void 0)return;if(e===document.activeElement)return;const n=String.fromCharCode(t.charCode);if(!c(n))return;e.focus(),t.preventDefault()}function c(t){const n=e.getAttribute("data-hotkeys")||"";return n.indexOf(t)>=0}function n(){e.removeEventListener("focus",n),e.required=!0,fetch(i).then(e=>e.json()).then(e=>{window.bookSearchIndex=new FlexSearch.Document(a),e.forEach(function(e){window.bookSearchIndex.add(e)})}).then(()=>e.required=!1).then(s)}function s(){for(;t.firstChild;)t.removeChild(t.firstChild);if(!e.value)return;const s=10;var a=window.bookSearchIndex.search({index:["title","content"],query:e.value,tag:e.dataset.filter,limit:s+2});let n=[],i={};a.forEach(function(e){e.result.forEach(function(e){if(i[e])return;i[e]=!0,n.push(window.bookSearchIndex.store[e])})});const r=n.length>s;if(n=n.slice(0,s),n.forEach(function(e){const n=o("<li><a href></a><small></small></li>"),s=n.querySelector("a"),i=n.querySelector("small");s.href=e.href,s.textContent=e.title,i.textContent=e.first+e.section,t.appendChild(n)}),r){const e=o("<li><center>• • •</center></li>");t.appendChild(e)}}function o(e){const t=document.createElement("div");return t.innerHTML=e,t.firstChild}})()